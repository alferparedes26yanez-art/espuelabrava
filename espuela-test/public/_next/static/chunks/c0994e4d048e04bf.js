(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59145,(e,a,s)=>{a.exports=e.r(2905)},93172,e=>{"use strict";let a={usuarios:[{user:"admin",pass:"8888",nombre:"DueÃ±o",saldo:0,rol:"admin"},{user:"cliente1",pass:"1234",nombre:"Juan PÃ©rez",saldo:500,rol:"cliente"},{user:"cliente2",pass:"1234",nombre:"MarÃ­a GarcÃ­a",saldo:300,rol:"cliente"}],cuota:1.8,apuestasAbiertas:!1,tiempoRestante:0,apuestasActuales:[],numeroPelea:1},s=[],t=()=>{s.forEach(e=>e())};window.mockDB=a,e.s(["authService",0,{login:async(e,s)=>(await new Promise(e=>setTimeout(e,300)),a.usuarios.find(a=>a.user===e&&a.pass===s)||null),getCurrentUser:()=>{let e=sessionStorage.getItem("currentUser");return e?JSON.parse(e):null},setCurrentUser:e=>{e?sessionStorage.setItem("currentUser",JSON.stringify(e)):sessionStorage.removeItem("currentUser")},logout:()=>{sessionStorage.removeItem("currentUser")}},"betService",0,{realizarApuesta:async(e,s,r)=>{if(await new Promise(e=>setTimeout(e,150)),!a.apuestasAbiertas||a.tiempoRestante<=0)throw Error("Las apuestas estÃ¡n cerradas");let i=a.usuarios.find(a=>a.user===e);if(!i)throw Error("Usuario no encontrado");if(r>i.saldo||r<=0)throw Error("Saldo insuficiente");return i.saldo-=r,a.apuestasActuales.push({user:e,opcion:s,monto:r,timestamp:Date.now()}),t(),!0},pagarGanadores:async e=>{await new Promise(e=>setTimeout(e,200));let s=0;return a.apuestasActuales.forEach(t=>{if(t.opcion===e){let e=a.usuarios.find(e=>e.user===t.user);if(e){let r=t.monto*a.cuota;e.saldo+=r,s+=r}}}),a.apuestasActuales=[],a.apuestasAbiertas=!1,a.tiempoRestante=0,t(),s},getApuestasActuales:async()=>(await new Promise(e=>setTimeout(e,50)),[...a.apuestasActuales])},"fightService",0,{getEstadoPelea:async()=>(await new Promise(e=>setTimeout(e,50)),{numeroPelea:a.numeroPelea,cuota:a.cuota,apuestasAbiertas:a.apuestasAbiertas,tiempoRestante:a.tiempoRestante,apuestasActuales:a.apuestasActuales}),updateNumeroPelea:async e=>(await new Promise(e=>setTimeout(e,100)),a.numeroPelea=e,t(),!0),updateCuota:async e=>(await new Promise(e=>setTimeout(e,100)),a.cuota=e,t(),!0),controlarApuestas:async(e,s)=>(await new Promise(e=>setTimeout(e,100)),a.apuestasAbiertas=e,e&&s?(a.tiempoRestante=s,a.apuestasActuales=[]):a.tiempoRestante=0,t(),!0),decrementarTiempo:()=>{a.tiempoRestante>0&&(a.tiempoRestante--,0===a.tiempoRestante&&(a.apuestasAbiertas=!1),t())}},"subscribeToChanges",0,e=>(s.push(e),()=>{s=s.filter(a=>a!==e)}),"userService",0,{createUser:async(e,s,r)=>{if(await new Promise(e=>setTimeout(e,200)),a.usuarios.find(e=>e.user===s))throw Error("El usuario ya existe");return a.usuarios.push({user:s,pass:r,nombre:e,saldo:0,rol:"cliente"}),t(),!0},getClientes:async()=>(await new Promise(e=>setTimeout(e,100)),a.usuarios.filter(e=>"cliente"===e.rol)),updateSaldo:async(e,s,r)=>{await new Promise(e=>setTimeout(e,150));let i=a.usuarios.find(a=>a.user===e);return!!i&&("sumar"===r?i.saldo+=s:i.saldo-=s,t(),!0)},getUserByUsername:async e=>(await new Promise(e=>setTimeout(e,50)),a.usuarios.find(a=>a.user===e)||null)}])},63159,e=>{"use strict";var a=e.i(72724),s=e.i(65450),t=e.i(59145),r=e.i(93172);function i(){let e=(0,t.useRouter)(),[i,o]=(0,s.useState)(null),[n,u]=(0,s.useState)([]),[l,c]=(0,s.useState)(!0),[d,m]=(0,s.useState)(""),[p,h]=(0,s.useState)(""),[g,b]=(0,s.useState)(""),[x,v]=(0,s.useState)(1),[j,C]=(0,s.useState)(60),[f,w]=(0,s.useState)(1.8);(0,s.useEffect)(()=>{let a=r.authService.getCurrentUser();if(!a)return void e.push("/login");if("admin"!==a.rol)return void e.push("/dashboard/cliente");o(a),A(),y(),c(!1);let s=(0,r.subscribeToChanges)(()=>{A(),y()});return()=>s()},[e]);let A=async()=>{u(await r.userService.getClientes())},y=async()=>{let e=await r.fightService.getEstadoPelea();v(e.numeroPelea),w(e.cuota)},S=async()=>{if(!d||!p||!g)return void alert("Faltan datos");try{await r.userService.createUser(d,p,g),alert("Usuario creado exitosamente"),m(""),h(""),b(""),await A()}catch(e){alert(e.message||"Error al crear usuario")}},P=async(e,a)=>{let s=prompt("Cantidad:");if(!s)return;let t=parseFloat(s);if(isNaN(t)||t<=0)return void alert("Cantidad invÃ¡lida");try{await r.userService.updateSaldo(e,t,a),await A()}catch(e){alert("Error al actualizar saldo")}},N=async()=>{await r.fightService.updateNumeroPelea(x),alert(`Cambiado a Pelea ${x}`)},R=async()=>{await r.fightService.updateCuota(f),alert("Cuota actualizada")},E=async e=>{await r.fightService.controlarApuestas(e,e?j:void 0),alert(e?"Apuestas abiertas":"Apuestas cerradas")},T=async e=>{if(confirm(`\xbfConfirmar que gan\xf3 ${e}?`))try{let a=await r.betService.pagarGanadores(e);await A(),alert(`Premios pagados para ${e}. Total: $${a.toFixed(2)}`)}catch(e){alert("Error al pagar ganadores")}};return l||!i?(0,a.jsx)("div",{className:"loading",children:"Cargando..."}):(0,a.jsxs)("div",{id:"main-dashboard",children:[(0,a.jsxs)("nav",{className:"navbar",children:[(0,a.jsx)("div",{className:"logo",children:"ðŸ¥Š Espuela Brava - ADMIN"}),(0,a.jsxs)("div",{className:"user-info",children:[(0,a.jsxs)("div",{className:"profile",children:[(0,a.jsx)("span",{children:i.nombre}),(0,a.jsx)("div",{className:"avatar",children:"ðŸ‘‘"})]}),(0,a.jsx)("button",{onClick:()=>{r.authService.logout(),e.push("/login")},className:"btn-logout",children:"Salir"})]})]}),(0,a.jsxs)("div",{className:"admin-section",children:[(0,a.jsx)("h2",{style:{color:"#d4af37",borderBottom:"2px solid #333",paddingBottom:"10px"},children:"Panel Master Administrativo"}),(0,a.jsxs)("div",{className:"admin-grid",children:[(0,a.jsxs)("div",{className:"admin-card",children:[(0,a.jsx)("h3",{children:"ðŸ‘¥ Crear Clientes"}),(0,a.jsx)("input",{type:"text",placeholder:"Nombre",value:d,onChange:e=>m(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Usuario",value:p,onChange:e=>h(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Clave",value:g,onChange:e=>b(e.target.value)}),(0,a.jsx)("button",{onClick:S,style:{background:"#27ae60"},children:"CREAR USUARIO"}),(0,a.jsx)("h4",{children:"Lista de Clientes"}),(0,a.jsx)("div",{className:"scroll-lista",children:n.map(e=>(0,a.jsxs)("div",{style:{background:"#222",margin:"5px",padding:"10px",borderRadius:"5px"},children:[e.nombre," - ",(0,a.jsxs)("b",{children:["$",e.saldo.toFixed(2)]}),(0,a.jsx)("br",{}),(0,a.jsx)("button",{onClick:()=>P(e.user,"sumar"),children:"+"}),(0,a.jsx)("button",{onClick:()=>P(e.user,"restar"),children:"-"})]},e.user))})]}),(0,a.jsxs)("div",{className:"admin-card",children:[(0,a.jsx)("h3",{children:"â±ï¸ Control de Pelea"}),(0,a.jsx)("label",{children:"NÃºmero de Pelea:"}),(0,a.jsx)("input",{type:"number",value:x,onChange:e=>v(Number(e.target.value))}),(0,a.jsx)("button",{onClick:N,style:{background:"#2980b9"},children:"ACTUALIZAR PELEA"}),(0,a.jsx)("hr",{}),(0,a.jsx)("label",{children:"Segundos:"}),(0,a.jsx)("input",{type:"number",value:j,onChange:e=>C(Number(e.target.value))}),(0,a.jsx)("button",{onClick:()=>E(!0),style:{background:"#d4af37",color:"#000"},children:"ABRIR PELEA"}),(0,a.jsx)("button",{onClick:()=>E(!1),style:{background:"#c0392b"},children:"CERRAR"}),(0,a.jsx)("hr",{}),(0,a.jsx)("label",{children:"Cuota:"}),(0,a.jsx)("input",{type:"number",step:"0.1",value:f,onChange:e=>w(Number(e.target.value))}),(0,a.jsx)("button",{onClick:R,style:{background:"#8e44ad"},children:"FIJAR CUOTA"})]}),(0,a.jsxs)("div",{className:"admin-card",children:[(0,a.jsx)("h3",{children:"ðŸ† Declarar Ganador"}),(0,a.jsx)("button",{onClick:()=>T("Rojo"),className:"btn-pago-rojo",children:"GANÃ“ ROJO"}),(0,a.jsx)("button",{onClick:()=>T("Empate"),className:"btn-pago-gris",children:"EMPATE"}),(0,a.jsx)("button",{onClick:()=>T("Azul"),className:"btn-pago-azul",children:"GANÃ“ AZUL"})]})]})]})]})}e.s(["default",()=>i])}]);